<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/global.css">
    <link rel="stylesheet" href="./styles/header.css">
    <link rel="stylesheet" href="./styles/sidebar.css">
    <link rel="stylesheet" href="./styles/addtask.css">
    <script src="https://www.w3schools.com/lib/w3.js"></script>
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
    <link rel="manifest" href="./assets/site.webmanifest">
    <title>Add Task</title>
</head>

<body>
    <header>
        <div w3-include-html="./header.html"></div>
    </header>

    <div class="layout">

        <aside>
            <div w3-include-html="./sidebar.html"></div>
        </aside>

        <main>
            <div class="main-container">

                <div class="title-container">
                    <input type="text" class="title-input" placeholder="Enter a title" required>
                    <span class="error-message">This field is required</span>
                </div>

                <div class="description-container">
                    <div class="description-header">
                        <span class="desc-title">Description</span>
                        <span class="desc-optional">(optional)</span>
                    </div>
                    <textarea class="description-input" placeholder="Enter a description"></textarea>
                </div>

                <div class="due-date-container">
                    <div class="due-date-header">Due date</div>
                    <div class="due-date-content">
                        <!-- Verstecktes natives date input für Funktionalität -->
                        <input type="date" class="due-date-input" required>
                        
                        <!-- Sichtbare, formatierte Anzeige -->
                        <span class="due-date-display" placeholder="dd/mm/yyyy">dd/mm/yyyy</span>
                        
                        <div class="due-date-icon-container">
                            <div class="due-date-icon"></div>
                        </div>
                    </div>
                    <span class="error-message">This field is required</span>
                </div>

                <div class="priority-container">
                    <div class="priority-header">Priority</div>
                    <div class="priority-content">
                        <button type="button" class="priority-frame">Urgent <img
                                src="./assets/icons-addtask/Prio alta.svg" alt=""></button>
                        <button type="button" class="priority-frame active">Medium <img
                                src="./assets/icons-addtask/Capa 2.svg" alt=""></button>
                        <button type="button" class="priority-frame">Low <img 
                                src="./assets/icons-addtask/Prio baja.svg" alt=""></button>
                    </div>
                </div>

                <div class="assigned-container">
                    <div class="assigned-header">
                        Assigned to <span class="optional">(optional)</span>
                    </div>

                    <div class="assigned-content">
                        <!-- Text bleibt im eigenen Container -->
                        <div class="assigned-text-container">
                            <div class="assigned-text">Select contacts to assign</div>
                        </div>

                        <!-- Input für Suche -->
                        <input type="text" class="assigned-input" placeholder="">

                        <!-- Pfeil jetzt in separatem Container -->
                        <div class="assigned-arrow-container">
                            <img src="/assets/icons-addtask/arrow_drop_down.png" alt="Select contacts"
                                class="arrow-dropdown">
                        </div>

                        <!-- Dropdown -->
                        <div class="dropdown-menu" id="assigned-dropdown"></div>
                    </div>

                    <div class="selected-avatars-container"></div>
                </div>

                <div class="category-container">
                    <div class="assigned-header">
                        Category
                    </div>
                    <div class="category-content">
                        <div class="assigned-text">Select task category</div>
                        <div class="assigned-arrow-container">
                            <img src="/assets/icons-addtask/arrow_drop_down.png" alt="Select contacts"
                                class="arrow-dropdown">
                        </div>
                    </div>
                </div>

                <div class="subtask-container">
                    <div class="assigned-header">
                        Subtasks <span class="optional">(optional)</span>
                    </div>

                    <div class="subtask-content-addtask">
                        <input type="text" id="subtask-text" class="subtask-text" placeholder="Add new subtask">
                        <div class="assigned-arrow-container">
                            <img id="cancel-btn" src="/assets/icons-addtask/cancel.png" alt="Cancel subtask"
                                class="assigned-icon">
                            <img id="check-btn" src="/assets/icons-addtask/check.png" alt="Confirm subtask"
                                class="assigned-icon">
                        </div>
                    </div>

                    <div id="task-dropdown" class="task-dropdown"></div>

                    <ul id="subtask-list" class="subtask-list"></ul>
                </div>

            </div>
        </main>
    </div>

    <div class="button-container">
        <button class="clear-btn">Clear <img src="./assets/icons-addtask/iconoir_cancel (1).png" alt=""></button>
        <button class="create-btn">Create Task <img src="./assets/icons-addtask/check (1).png" alt=""></button>
    </div>        

    <script src="./scripts/auth.js"></script>
    <script src="./scripts/header.js"></script>
    <script>
        w3.includeHTML(() => {            
            updateUserLogo();
            setActiveNavigation();
            });
    </script>
    <script src="./scripts/addtask.js"></script>
    <script src="./scripts/tasks-crud.js"></script>

</body>
</html>
